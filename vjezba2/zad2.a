		MOVE	10000, SP
		MOVE 	PODACI, R3
		
PETLJA 	LOADH 	R1, (R3) ; GLAVNI PROGRAM
		LOADH 	R2, (R3+2)
		CMP 	R1, 8000
		JP_EQ 	PRVI_KRAJ
NASTAVI PUSH 	R1
		PUSH 	R2
		CALL 	VISE_1
		POP		R1
		POP		R1
		STORE 	R0, (R3)
		ADD R3, 4, R3
		JP PETLJA
	
VISE_1 	
		STORE	R1, (SP + 8)
		STORE	R2, (SP + 4)
		MOVE 	0, R4
		MOVE 	0, R5
		MOVE 	10, R6
KRUG 	ROTR 	R1, 1, R1
		ADC 	R4, 0, R4
		ROTR 	R2, 1, R2
		ADC 	R5, 0, R5
		SUB 	R6, 1, R6
		JP_Z 	END_COUNT
		JP 		KRUG
END_COUNT CMP 	R4, R5
		JP_EQ 	WR_DEF
		JP_ULT 	WR_SEC
		JP_UGT WR_FIR
WR_DEF 	MOVE 	8000, R4
		SHL 	R4, 10, R0
		RET
WR_SEC 	ASHR 	R2, 10, R0
		RET
WR_FIR 	ASHR 	R1, 10, R0
		RET

PRVI_KRAJ CMP R2, 8000
	JP_EQ FINAL
	JP NASTAVI
	
	
FINAL	HALT 
PODACI DH 1234, 00FF, 00FF, FF01, 0001, FFFF, 002A, 020A, 0456, 0123, 8000, 8000
